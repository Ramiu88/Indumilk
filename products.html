<!DOCTYPE html>
<html lang="fr">
<head>
    <script src="auth-guard.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indumilk Delights - Produits</title>
    <script>
        // Immediately-invoked function to prevent FOUC (Flash of Unstyled Content)
        // when switching to dark mode. This script runs before the page is rendered.
        (function() {
            try {
                const theme = localStorage.getItem('theme');
                // If dark mode is stored in localStorage, apply the 'dark-mode' class to the <html> element.
                if (theme === 'dark') {
                    document.documentElement.classList.add('dark-mode');
                }
            } catch (e) {}
        })();
    </script>
    <link rel="stylesheet" href="products.css">
</head>
<body>
    <nav class="navbar">
        <a href="products.html" class="logo" style="display:flex;align-items:center;">
            <img src="Indumilk.png" alt="Indumilk Logo" style="height:58px;vertical-align:middle;">
        </a>
        <div class="navLinks">
            <a id="btn-menu" href="menu.html">Menu</a>
            <a id="btn-produit" class="active" href="products.html">Produit</a>
            <a id="btn-games" href="minigame.html">Mini Jeux</a>
            <a id="btn-history" href="history.html">Histoire</a>
            <a id="btn-stats" href="statistics.html">statistics</a>
            <a id="btn-contact" href="contact.html">Contact</a>
        </div>
        <div class="langSelect">
            <button class="langIcon" onclick="toggleLangDropdown()">üåê</button>
            <div class="langDropdown" id="langDropdown">
                <button onclick="setLang('fr')">Fran√ßais</button>
                <button onclick="setLang('en')">English</button>
                <button onclick="setLang('ar')">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</button>
            </div>
        </div>
        <button class="accountHub" onclick="showAccount()">üë§</button>
    </nav>

    <div class="accountSlide" id="accountSlide">
        <button class="closeSlide" onclick="closeAccount()">√ó</button>
        <h2 id="profileTitle">Profil</h2>
        <div class="profileInfo" id="profileInfo">
            <p>Nom: Utilisateur Invit√©</p>
            <p>Email: guest@indumilk.com</p>
            <p>Membre depuis: 2024</p>
        </div>
        <div class="orderHistory" id="orderHistory">
            <h3>Historique des commandes</h3>
            <p>Aucune commande r√©cente</p>
        </div>
        <button class="logoutBtn" id="logoutBtn" onclick="logout()">D√©connexion</button>
    </div>

    <!-- Products Section -->
    <div class="productsContainer">
        <h1 class="productsTitle" id="productsTitle">Nos Produits Indumilk</h1>
        
        <!-- Category Filter -->
        <div class="categoryFilter" id="categoryFilter">
            <button class="filterBtn active" data-category="all" id="filterAll">Tous</button>
            <button class="filterBtn" data-category="dairy" id="filterDairy">Laitier</button>
            <button class="filterBtn" data-category="cheese" id="filterCheese">Fromage</button>
            <button class="filterBtn" data-category="premium" id="filterPremium">Premium</button>
        </div>

        <!-- Featured Product Banner -->
        <div class="featuredBanner" id="featuredBanner">
            <div class="featuredContent">
                <img src="lait.jpg" alt="Featured Product" class="featuredImage" id="featuredImage">
                <div class="featuredInfo">
                    <h2 id="featuredTitle">Produit du Mois</h2>
                    <h3 id="featuredName">Lait Frais Premium</h3>
                    <p id="featuredDescription">Notre lait frais de qualit√© sup√©rieure, directement de nos fermes partenaires.</p>
                    <div class="featuredPrice" id="featuredPrice">15 DH</div>
                    <button class="featuredBtn" id="featuredBtn">Ajouter au Panier</button>
                </div>
            </div>
        </div>

        <!-- Products Grid -->
        <div class="productsGrid" id="productsGrid">
            <!-- Products will be populated by JavaScript -->
        </div>

        <!-- Product Detail Modal -->
        <div class="productModal" id="productModal">
            <div class="modalContent">
                <span class="modalClose" onclick="closeProductModal()">&times;</span>
                <div class="modalBody">
                    <img src="" alt="" class="modalImage" id="modalImage">
                    <div class="modalInfo">
                        <h2 id="modalTitle">Nom du Produit</h2>
                        <p id="modalDescription">Description du produit</p>
                        <div class="modalPrice" id="modalPrice">Prix</div>
                        <div class="modalDetails">
                            <h4 id="modalDetailsTitle">D√©tails du Produit:</h4>
                            <ul id="modalDetailsList">
                                <li id="modalOrigin">Origine: Fermes locales</li>
                                <li id="modalExpiry">Dur√©e de conservation: 7 jours</li>
                                <li id="modalStorage">Conservation: R√©frig√©rateur</li>
                            </ul>
                        </div>
                        <div class="modalActions">
                            <button class="modalAddBtn" id="modalAddBtn">Ajouter au Panier</button>
                            <button class="modalFavoriteBtn" id="modalFavoriteBtn">‚ù§Ô∏è Favoris</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Cart Sidebar -->
        <div class="cartSidebar" id="cartSidebar">
            <div class="cartHeader">
                <h3 id="cartTitle">Panier</h3>
                <button class="cartClose" onclick="toggleCart()">√ó</button>
            </div>
            <div class="cartItems" id="cartItems">
                <p id="cartEmpty">Votre panier est vide</p>
            </div>
            <div class="cartFooter">
                <div class="cartTotal" id="cartTotal">Total: 0 DH</div>
                <button class="checkoutBtn" id="checkoutBtn">Commander</button>
            </div>
        </div>
    </div>

    <!-- Floating Cart Button -->
    <button class="floatingCart" onclick="toggleCart()" id="floatingCart">
        üõí <span id="cartCount">0</span>
    </button>

    <!-- Dark Mode Toggle -->
    <button class="darkModeToggle" onclick="toggleDarkMode()" id="darkModeToggle">üåô</button>

    <script src="products.js"></script>
</body>
</html>